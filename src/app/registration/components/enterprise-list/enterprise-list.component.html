<app-breadcrumb [title]="'Empresa'" [domain]="'Cadastro'" [page]="'Pesquisa Empresa'"></app-breadcrumb>

<div class="content">
    <div class="animated fadeIn">
        <div class="row">
            <div class="col-12 col-sm-12">
                <article class="article">
                    <button class="pull-right btn-new" color="primary" mat-raised-button [routerLink]="['/registration/enterprise']">Nova
                        Empresa
                    </button>
                </article>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-sm-12">

                <div *ngIf="showMessage">
                    <app-message [message]="titleMsg" [type]="'info'"></app-message>
                </div>

                <div class="table-container mat-elevation-z8" [hidden]="!hasSearch">

                    <div class="table-header">
                        <mat-form-field>
                            <input matInput (keyup)="applyFilter($event.target.value, dataSource)" placeholder="Pesquisar">
                        </mat-form-field>
                    </div>

                    <mat-table #table [dataSource]="dataSource" matSort matSortActive="name" matSortDirection="asc"
                        matSortDisableClear>

                        <!-- Name -->
                        <ng-container matColumnDef="name">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="name">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                Nome
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.name}} </mat-cell>
                        </ng-container>

                        <!-- cnpj -->
                        <ng-container matColumnDef="cnpj">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="cnpj">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                CNPJ
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.cnpj}} </mat-cell>
                        </ng-container>

                        <!-- city -->
                        <ng-container matColumnDef="city">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="city">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                Cidade
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.city}} </mat-cell>
                        </ng-container>

                        <!-- mainContact -->
                        <ng-container matColumnDef="mainContact">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="mainContact">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                Contato
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.mainContact}} </mat-cell>
                        </ng-container>

                        <!-- phone -->
                        <ng-container matColumnDef="phone">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="phone">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                Telefone
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.phone}} </mat-cell>
                        </ng-container>

                        <!-- mobile -->
                        <ng-container matColumnDef="mobile">
                            <mat-header-cell *matHeaderCellDef mat-sort-header="mobile">
                                <mat-icon class="tooltip-table" matTooltip="'Clique na seta para alterar a ordem de ordenação da tabela'"
                                    [matTooltipPosition]="'above'">help</mat-icon>
                                Celular
                            </mat-header-cell>
                            <mat-cell *matCellDef="let enterprise"> {{enterprise.mobile}} </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="edit">
                            <mat-header-cell *matHeaderCellDef></mat-header-cell>
                            <mat-cell *matCellDef="let enterprise">
                                <mat-icon class="cursor-pointer" mat-button [routerLink]="['/registration/enterprise']"
                                    [queryParams]="{_id: enterprise.cnpj}" matTooltip="Editar">mode_edit</mat-icon>
                            </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="delete">
                            <mat-header-cell *matHeaderCellDef style="flex: 0 0 15%"></mat-header-cell>
                            <mat-cell *matCellDef="let enterprise" style="flex: 0 0 15%">
                                <mat-icon style="color: #DD6B55;" class="cursor-pointer" mat-button (click)="delete(enterprise.cnpj)"
                                    matTooltip="Apagar">delete</mat-icon>
                            </mat-cell>
                        </ng-container>

                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                    </mat-table>

                    <mat-paginator #paginator [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]">
                    </mat-paginator>
                </div>
            </div>
        </div>
    </div>
</div>